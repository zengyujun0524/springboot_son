<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.springboot_son.mapper.VideoInfoMapper">

    <resultMap type="com.example.springboot_son.entity.VideoInfo" id="VideoInfoMap">
        <result property="videoId" column="video_id" jdbcType="INTEGER"/>
        <result property="videoUrl" column="video_url" jdbcType="VARCHAR"/>
        <result property="videoTitle" column="video_title" jdbcType="VARCHAR"/>
        <result property="videoDescribe" column="video_describe" jdbcType="VARCHAR"/>
        <result property="uploadTime" column="upload_time" jdbcType="VARCHAR"/>
        <result property="agreeNumber" column="agree_number" jdbcType="VARCHAR"/>
        <result property="pageUrl" column="page_url" jdbcType="VARCHAR"/>
        <result property="userId" column="user_id" jdbcType="INTEGER"/>
    </resultMap>

    <!--查询单个-->
    <select id="queryById" resultMap="VideoInfoMap">
        select
          video_id, video_url, video_title, video_describe, upload_time, agree_number, page_url, user_id
        from baba_app.video_info
        where video_id = #{videoId}
    </select>

    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="VideoInfoMap">
        select
          video_id, video_url, video_title, video_describe, upload_time, agree_number, page_url, user_id
        from baba_app.video_info
        limit #{offset}, #{limit}
    </select>

    <!--通过实体作为筛选条件查询-->
    <select id="queryAll" resultMap="VideoInfoMap">
        select
          video_id, video_url, video_title, video_describe, upload_time, agree_number, page_url, user_id
        from baba_app.video_info
        <where>
            <if test="videoId != null">
                and video_id = #{videoId}
            </if>
            <if test="videoUrl != null and videoUrl != ''">
                and video_url = #{videoUrl}
            </if>
            <if test="videoTitle != null and videoTitle != ''">
                and video_title = #{videoTitle}
            </if>
            <if test="videoDescribe != null and videoDescribe != ''">
                and video_describe = #{videoDescribe}
            </if>
            <if test="uploadTime != null and uploadTime != ''">
                and upload_time = #{uploadTime}
            </if>
            <if test="agreeNumber != null and agreeNumber != ''">
                and agree_number = #{agreeNumber}
            </if>
            <if test="pageUrl != null and pageUrl != ''">
                and page_url = #{pageUrl}
            </if>
            <if test="userId != null">
                and user_id = #{userId}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="videoId" useGeneratedKeys="true">
        insert into baba_app.video_info(video_url, video_title, video_describe, upload_time, agree_number, page_url, user_id)
        values (#{videoUrl}, #{videoTitle}, #{videoDescribe}, #{uploadTime}, #{agreeNumber}, #{pageUrl}, #{userId})
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update baba_app.video_info
        <set>
            <if test="videoUrl != null and videoUrl != ''">
                video_url = #{videoUrl},
            </if>
            <if test="videoTitle != null and videoTitle != ''">
                video_title = #{videoTitle},
            </if>
            <if test="videoDescribe != null and videoDescribe != ''">
                video_describe = #{videoDescribe},
            </if>
            <if test="uploadTime != null and uploadTime != ''">
                upload_time = #{uploadTime},
            </if>
            <if test="agreeNumber != null and agreeNumber != ''">
                agree_number = #{agreeNumber},
            </if>
            <if test="pageUrl != null and pageUrl != ''">
                page_url = #{pageUrl},
            </if>
            <if test="userId != null">
                user_id = #{userId},
            </if>
        </set>
        where video_id = #{videoId}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete from baba_app.video_info where video_id = #{videoId}
    </delete>

</mapper>